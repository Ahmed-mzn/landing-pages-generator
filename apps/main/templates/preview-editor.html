{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta charset="UTF-8">
    <meta name="description" content="{{ template.meta_description }}">
    <meta name="keywords" content="{{ template.meta_keywords }}">
    <meta property="og:title" content="{{ request.path }}">
    <meta property="og:description" content="{{ template.meta_description }}">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:image" content="{{ template.get_preview_image_url }}">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="436">
    <meta property="og:image:height" content="228">
    <link rel="icon" href="/media/{{ template.logo }}" type="image/x-icon">
    <link rel="stylesheet" href="{% static '/assets/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static '/assets/css/HelveticaNeueLT%20Arabic%2055%20Roman.css' %}" rel="stylesheet">
{#    <link rel="stylesheet" href="{% static '/assets/fonts/fontawesome-all.min.css' %}" rel="stylesheet">#}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css">


    <!-- Moyasar Styles -->
    <link rel="stylesheet" href="https://cdn.moyasar.com/mpf/1.7.3/moyasar.css">

    <!-- Moyasar Scripts -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=fetch"></script>
    <script src="https://cdn.moyasar.com/mpf/1.7.3/moyasar.js"></script>

    <!-- Third party libs -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

{#    <!-- Vue development -->#}
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
{#    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>#}

    <!-- Vue production -->
{#    <script src="https://cdn.jsdelivr.net/npm/vue"></script>#}

    <!-- Js Files -->
    <script src="{% static '/assets/js/ProductsForm.js' %}?id=11"></script>
    <script src="{% static '/assets/js/ProductsForm2.js' %}?id=11"></script>
    <script src="{% static '/assets/js/shareButton.js' %}?id=11"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
    <!-- Or for RTL support -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.rtl.min.css" />

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <link href="{% static '/assets/css/styles.css' %}?id=11" rel="stylesheet">
    <title>{{ template.meta_title }}</title>
    <style>
        {{ template.css | safe}}
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            /* display: none; <- Crashes Chrome on hover */
            -webkit-appearance: none;
            margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
        }

        input[type=number] {
            -moz-appearance:textfield; /* Firefox */
        }
    </style>
</head>
{% if template %}
    {{ template.html | safe }}
{% endif %}
<script>
    var session = {
        template: {{ template.id }},
        duration: 0,
        city: '',
        region: '',
        ip_address: '',
        country: '',
        location: '',
    }

    function getIpInfo(){

    }

    function setDuration(){
        session.duration += 1;
    }

    function leaving(){
        fetch('https://landing.socialbot.dev/api/v1/public/create_visit/', {
            method: 'POST',
            body: JSON.stringify(session),
            credentials: "same-origin",
            headers: {
                "Accept": "application/json",
                'Content-Type': 'application/json'
            },
            keepalive: true,
        })
        const time = Date.now();
        while ((Date.now() - time) < 500) {

        }
        return true;
    }

    window.addEventListener("beforeunload", leaving);

    window.setInterval(() => {
        setDuration();
    }, 1000)


</script>
<script src="{% static '/assets/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static '/assets/js/app.js' %}?id=11"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<!-- Latest compiled and minified JavaScript -->
</html>